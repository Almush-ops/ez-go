---
interface FAQItem {
  question: string;
  answer: string;
}

interface Props {
  items: FAQItem[];
  title?: string;
}

const { items, title = 'שאלות נפוצות' } = Astro.props;
---

<section class="faq-section">
  <h2 class="text-2xl font-bold text-dark mb-6">{title}</h2>
  <div class="space-y-3">
    {items.map((item, index) => (
      <details class="group border border-border rounded-lg bg-white hover:border-ezgo-200 transition-colors">
        <summary class="flex items-center justify-between p-4 cursor-pointer list-none">
          <span class="font-medium text-dark group-hover:text-ezgo-600 transition-colors">{item.question}</span>
          <svg class="w-5 h-5 text-ezgo-500 group-open:rotate-180 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </summary>
        <div class="px-4 pb-4 pt-0 text-gray-600 text-sm leading-relaxed" set:html={item.answer} />
      </details>
    ))}
  </div>
</section>

<!-- FAQPage Schema -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": items.map(item => ({
    "@type": "Question",
    "name": item.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": item.answer.replace(/<[^>]*>/g, '')
    }
  }))
})} />
